stages:
  - deploy

deploy:
  stage: deploy
  script:
    - git pull origin main
    - mvn package
    - kill $(ps aux | grep java | grep chadow | awk '{print $2}')
    - nohup java -jar --enable-preview target/chadow-1.0.0.jar --server 7777 > /dev/null 2>&1 &
  only:
    - main
  tags:
    - shell